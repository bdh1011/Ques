<html>

<head>
   <title>회원가입 :: 큐스</title>
    <link href="../static/css/style.css" rel="stylesheet">
</head>

<body class="intro">
    <div id="contents">

        <div class="login_background"></div>
        <div id="simple_logo_header">
            <div class="logo_container">
                <a href="/">
                    <img src="{{url_for('static',filename='img/QUES_txt.png')}}">
                </a>
            </div>
        </div>
        <div class="movable first" style="position:absolute; width:100%">
            <div class="table_center">
                <div class="ham_box" style="margin-bottom:12px;">
                    <div class="title">
                        회원가입
                    </div>
                    <div class="content_ham no_top_radius">
                        <form accept-charset="UTF-8" action="/join" class="new_user" id="new_user" method="post">
                            <div style="margin:0;padding:0;display:inline">
                                <input name="utf8" type="hidden" value="✓">
                                <input name="authenticity_token" type="hidden" value="hpc+dwXVo03pQp2ExhESO91DyqcLQxQFC25G7PmY6j8=">
                            </div>
                            <input id="user_password_initialized" name="user[password_initialized]" type="hidden" value="true">
                            <input id="continue" name="continue" type="hidden">
                            <div class="input_form">
                                <div class="box_wrapper first">
                                    <input autocapitalize="off" autocomplete="off" autocorrect="off" autofocus="autofocus" class="joinbox email" id="user_email" name="user[email]" placeholder="이메일 주소" size="30" type="email">
                                    <label for="user_email">이메일 주소</label>

                                    <div class="validation_check"></div>
                                </div>
                                <div class="box_wrapper">
                                    <input class="joinbox name" id="user_name" name="user[name]" placeholder="이름" size="30" type="text">
                                    <label for="user_name">이름</label>
                                    <div class="validation_check"></div>
                                </div>
                                <div class="box_wrapper last">
                                    <input autocapitalize="off" autocomplete="off" autocorrect="off" class="joinbox password" id="user_password" name="user[password]" placeholder="비밀번호 (6자 이상)" size="30" type="password">
                                    <label for="user_password">비밀번호 (6자 이상)</label>
                                    <div class="validation_check"></div>
                                </div>
                                <div class="box_wrapper">
                                    <span class="radio_title">성별</span>
                                    <span class="radio_option">남</span><input size="30" type="radio" value="male">
                                    &nbsp;&nbsp;

                                    <span class="radio_option">여</span><input size="30" type="radio" value="female">
                                    <div class="validation_check"></div>
                                </div>

                                <div class="box_wrapper">
                                    <span class="radio_title">나이</span>
                                    <span class="radio_option">10대</span><input size="20" type="radio" value="10age">
                                    <span class="radio_option">20대</span><input size="20" type="radio" value="20age">
                                      <span class="radio_option">30대</span><input size="20" type="radio" value="30age">
                                    <span class="radio_option">40대</span><input size="20" type="radio" value="40age">

                                    <div class="validation_check"></div>
                                </div>

                            </div>

                            <div id="submit_join" class="btn_join disable" disabled="disabled">등록하기
                                <div class="email_fake_btn">
                                    <div class="email_inner_img"></div>
                                </div>
                            </div>
                            <div class="comment_top">
                                <a href="/login">로그인</a> / <a href="/about/agreement" target="_blank">약관 보기</a>
                            </div>
                        </form>
                    </div>
                </div>

                </div>

        <script>
            var timeoutID;

            function clearNDelayAjax(i) {
                window.clearTimeout(timeoutID);
                timeoutID = window.setTimeout(function() {
                    checkEmail(i)
                }, 1000);
            }

            $('.joinbox.email, .joinbox.name, .joinbox.password').placeholder();

            $(document).on("keyup", ".joinbox.email", function() {
                clearNDelayAjax($(this));
            });

            function checkEmail(i) {
                var isValid = false;
                if (validateEmail(i.val())) {
                    $.ajax({
                        url: "/user/check_email/",
                        data: {
                            email: i.val()
                        },
                        success: function(ret) {
                            if (ret == "suc") {
                                isValid = true;
                                if ($(".input_field_errors").size() != 0) {
                                    $(".input_field_errors").remove();
                                }
                            } else if (ret == "fail") {
                                if ($(".input_field_errors").size() == 0) {
                                    $(".input_form").after("<div class=\"input_field_errors join\">이미 존재하는 이메일입니다.</div>");
                                }
                            }
                            changeValidIcon(i, isValid);
                        }
                    });
                }
            }

            // label
            $(document).ready(function() {
                setTimeout(function() {
                    $(".joinbox").each(function() {
                        checkVal($(this));
                        checkJoinValidation($(this));
                    });
                }, 100);
            });
            $(document).on("keyup blur", ".joinbox", function() {
                checkVal($(this));
                checkJoinValidation($(this));
            });
            $(document).on("keydown", ".joinbox", function() {
                checkVal($(this));
            });
            // validation
            function validateEmail($email) {
                var emailReg = /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}?$/;
                return emailReg.test($email);
            }

            function changeValidIcon($this, isValid) {
                if (isValid) {
                    $this.parent().find(".validation_check").toggleClass("valid", true);
                } else {
                    $this.parent().find(".validation_check").toggleClass("valid", false);
                }

                var s = $(".btn_join");
                if ($(".box_wrapper .valid").length > 2) {
                    s.toggleClass("disable", false).toggleClass("enabled", true).removeAttr("disabled");
                } else {
                    s.toggleClass("disable", true).toggleClass("enabled", false).attr("disabled", "disabled");;
                }
            }

            function checkJoinValidation(i) {
                var isValid = undefined;
                if (i.hasClass("name")) {
                    isValid = $.trim(i.val()).length >= 2 && $.trim(i.val()).length <= 20;
                    isValid = isValid && (checkHangulNum(i.val()) || checkEngNum(i.val()))
                } else if (i.hasClass("password")) {
                    isValid = i.val().length >= 6 && i.val().length <= 20;
                }

                if (isValid == true || isValid == false) {
                    changeValidIcon(i, isValid);
                }
            }

            function checkVal(a) {
                if (a.val().length > 0)
                    a.parent().addClass("val")
                else
                    a.parent().removeClass("val")
            }

            function checkHangulNum(str) {
                for (var j = 0; j < str.length; j++) {
                    var chr = str.substr(j, 1);
                    chr = escape(chr);
                    if (j == 0 && !isNaN(chr)) {
                        return false;
                    } else {
                        if (chr.charAt(1) == "u") {
                            chr = chr.substr(2, (chr.length - 1));
                            if ((chr < "AC00") || (chr > "D7A3"))
                                return false;
                        } else if (isNaN(chr)) {
                            return false;
                        }
                    }
                }
                return true;
            }

            function checkEngNum(str) {
                    if (str.match(/[^a-z\ A-Z0-9]/) != null) {
                        return false;
                    } else {
                        return true;
                    }
                }
                /*
                 $(".btn_facebook_join").click(function() {
                 snsconnect('facebook', '/join');
                 return false;
                 });
                 */
        </script>
        <script>
            $(document).on("keydown", ".input_form", function(e) {
                var code
                if (e.keyCode) {
                    code = e.keyCode
                } else {
                    code = e.which
                }
                if (code == 13) {
                    $('#submit_join[disabled!="disabled"]').trigger('click')
                }
            });
        </script>

    </div>
    <script type="text/javascript">
        adroll_adv_id = "TQL7PFOBG5ES5EZEXO4NRM";
        adroll_pix_id = "GZKZVF5HHBDGHN5OY6OVXG";
        (function() {
            var oldonload = window.onload;
            window.onload = function() {
                __adroll_loaded = true;
                var scr = document.createElement("script");
                var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
                scr.setAttribute('async', 'true');
                scr.type = "text/javascript";
                scr.src = host + "/j/roundtrip.js";
                ((document.getElementsByTagName('head') || [null])[0] ||
                    document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
                if (oldonload) {
                    oldonload()
                }
            };
        }());
    </script>



    <div data-html2canvas-ignore="true" class="uv-icon uv-bottom-left">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="39px" height="39px" viewBox="0 0 39 39" enable-background="new 0 0 39 39" xml:space="preserve">
            <g>
                <path class="uv-bubble-background" fill="rgba(46, 49, 51, 0.6)" d="M31.425,34.514c-0.432-0.944-0.579-2.007-0.591-2.999c4.264-3.133,7.008-7.969,7.008-13.409
    C37.842,8.658,29.594,1,19.421,1S1,8.658,1,18.105c0,9.446,7.932,16.79,18.105,16.79c1.845,0,3.94,0.057,5.62-0.412
    c0.979,1.023,2.243,2.3,2.915,2.791c3.785,2.759,7.571,0,7.571,0S32.687,37.274,31.425,34.514z" style="fill: rgb(255, 56, 46);"></path>
                <g>
                    <g>
                        <path class="uv-bubble-foreground" fill="#FFFFFF" d="M16.943,19.467c0-3.557,4.432-3.978,4.432-6.058c0-0.935-0.723-1.721-2.383-1.721
        c-1.508,0-2.773,0.725-3.709,1.87l-2.441-2.743c1.598-1.9,4.01-2.924,6.602-2.924c3.891,0,6.271,1.959,6.271,4.765
        c0,4.4-5.037,4.732-5.037,7.265c0,0.481,0.243,0.994,0.574,1.266l-3.316,0.965C17.303,21.459,16.943,20.522,16.943,19.467z
         M16.943,26.19c0-1.326,1.114-2.441,2.44-2.441c1.327,0,2.442,1.115,2.442,2.441c0,1.327-1.115,2.441-2.442,2.441
        C18.058,28.632,16.943,27.518,16.943,26.19z" style="fill: rgb(255, 255, 255);"></path>
                    </g>
                </g>
            </g>
        </svg>
    </div>
</body>

</html>